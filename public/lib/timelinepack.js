webpackJsonp([20],{0:function(a,b,c){a.exports=c(507)},507:function(a,b,c){if(a.exports={AbstractTimelineChannel:c(508),EventChannel:c(509),TimelineComponent:c(510),TimelineComponentHandler:c(511),TimelineSystem:c(513),ValueChannel:c(512)},"undefined"!=typeof window)for(var d in a.exports)window.goo[d]=a.exports[d]},508:function(a,b){function c(a){this.id=a,this.enabled=!0,this.keyframes=[],this.lastTime=0}c.prototype._find=function(a,b){var c=0,d=a.length-1,e=a[a.length-1].time;if(b>e)return d;for(;d-c>1;){var f=Math.floor((d+c)/2),g=a[f].time;b>g?c=f:d=f}return c},c.prototype.sort=function(){return this.keyframes.sort(function(a,b){return a.time-b.time}),this.lastTime=this.keyframes[this.keyframes.length-1].time,this},a.exports=c},509:function(a,b,c){function d(a){e.call(this,a),this.oldTime=0,this.callbackIndex=0}var e=c(508);d.prototype=Object.create(e.prototype),d.prototype.constructor=e,d.prototype.addCallback=function(a,b,c){var d={id:a,time:b,callback:c},e=this.keyframes;if(b>this.lastTime)e.push(d),this.lastTime=b;else if(!e.length||b<e[0].time)e.unshift(d);else{var f=this._find(e,b)+1;e.splice(f,0,d)}return this},d.prototype.update=function(a){if(!this.enabled)return this;var b=this.keyframes;if(!b.length)return this;if(a<this.oldTime){for(;this.callbackIndex<b.length;)b[this.callbackIndex].callback(),this.callbackIndex++;this.callbackIndex=0}for(;this.callbackIndex<b.length&&a>=b[this.callbackIndex].time&&a!==this.oldTime;)b[this.callbackIndex].callback(),this.callbackIndex++;return this.oldTime=a,this},d.prototype.setTime=function(a){return this.enabled&&this.keyframes.length?(a<=this.keyframes[0].time?this.callbackIndex=0:this.callbackIndex=this._find(this.keyframes,a)+1,this.oldTime=a,this):this},a.exports=d},510:function(a,b,c){function d(){e.apply(this,arguments),this.type="TimelineComponent",this.channels=[],this.time=0,this.duration=0,this.loop=!1,this.playing=!0,this.autoStart=!0}var e=c(20);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.addChannel=function(a){return this.channels.push(a),this},d.prototype.update=function(a){if(this.playing){var b=this.time+a;if(b>this.duration&&(this.loop?b%=this.duration:b=this.duration),b!==this.time){this.time=b;for(var c=0;c<this.channels.length;c++){var d=this.channels[c];d.update(this.time)}}}},d.prototype.start=function(){this.playing=!0},d.prototype.resume=d.prototype.start,d.prototype.pause=function(){this.playing=!1},d.prototype.stop=function(){this.playing=!1,this.setTime(0)},d.prototype.setTime=function(a){this.time=a;for(var b=0;b<this.channels.length;b++){var c=this.channels[b];c.setTime(this.time)}return this},d.prototype.getValues=function(){for(var a={},b=0;b<this.channels.length;b++){var c=this.channels[b];"undefined"!=typeof c.value&&c.keyframes.length&&(a[c.id]=c.value)}return a},a.exports=d},511:function(a,b,c){function d(){i.apply(this,arguments),this._type="TimelineComponent"}function e(a){if(!a)return p.Linear.None;var b=a.indexOf("."),c=a.substr(0,b),d=a.substr(b+1);return p[c][d]}function f(a,b,c){var d=!1,f=m.find(c.keyframes,function(a){return a.id===b}),g=e(a.easing);return f?(f.time!==+a.time&&(d=!0),f.time=+a.time,f.value=+a.value,f.easingFunction=g):c.addKeyframe(b,a.time,a.value,g),{needsResorting:d}}function g(a,b,c,d){var e=!1,f=m.find(c.keyframes,function(a){return a.id===b}),g=function(){n.emit(d.eventName,a.value)};return f?(f.time!==+a.time&&(e=!0),f.time=+a.time,f.callback=g):c.addCallback(b,a.time,g),{needsResorting:e}}function h(a,b,c,e,h){var i=m.find(c.channels,function(a){return a.id===b});if(i){if(a.entityId&&i.callbackUpdate&&i.callbackUpdate.rotation){var j=h[a.entityId]=i.callbackUpdate.rotation;j[0]=0,j[1]=0,j[2]=0}}else{var n=a.propertyKey;if(n){var o=a.entityId;o&&!h[o]&&(h[o]=[0,0,0]);var p=d.tweenMap[n](o,e,h[o]);i=new k(b,{callbackUpdate:p})}else i=new l(b);c.channels.push(i)}i.enabled=a.enabled!==!1,i.keyframes=i.keyframes.filter(function(b){return!!a.keyframes[b.id]});var q=!1;if(a.propertyKey)for(var r in a.keyframes){var s=a.keyframes[r],t=f(s,r,i,a);q=q||t.needsResorting}else for(var r in a.keyframes){var s=a.keyframes[r],t=g(s,r,i,a);q=q||t.needsResorting}q&&i.sort()}var i=c(88),j=c(510),k=c(512),l=c(509),m=c(86),n=c(44),o=c(6),p=c(173);d.prototype=Object.create(i.prototype),d.prototype.constructor=d,i._registerClass("timeline",d),d.prototype._prepare=function(){},d.prototype._create=function(){var a=new j;return a},d.tweenMap={translationX:k.getSimpleTransformTweener.bind(null,"translation","x"),translationY:k.getSimpleTransformTweener.bind(null,"translation","y"),translationZ:k.getSimpleTransformTweener.bind(null,"translation","z"),scaleX:k.getSimpleTransformTweener.bind(null,"scale","x"),scaleY:k.getSimpleTransformTweener.bind(null,"scale","y"),scaleZ:k.getSimpleTransformTweener.bind(null,"scale","z"),rotationX:k.getRotationTweener.bind(null,0),rotationY:k.getRotationTweener.bind(null,1),rotationZ:k.getRotationTweener.bind(null,2)},d.prototype.update=function(a,b,c){var d=this;return i.prototype.update.call(this,a,b,c).then(function(a){if(a){isNaN(b.duration)||(a.duration=+b.duration),a.loop=b.loop.enabled===!0,a.autoStart=void 0!==b.autoStart?b.autoStart:!0,a.autoStart?a.start():a.stop(),a.channels=a.channels.filter(function(a){return!!b.channels[a.id]});var c=function(a){return d.world.entityManager.getEntityById(a)},e={};return o.forEach(b.channels,function(b){h(b,b.id,a,c,e)},null,"sortValue"),a}})},a.exports=d},512:function(a,b,c){function d(a,b){e.call(this,a),this.value=0,b=b||{},this.callbackUpdate=b.callbackUpdate,this.callbackEnd=b.callbackEnd}var e=c(508),f=c(9);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.addKeyframe=function(a,b,c,d){var e={id:a,time:b,value:c,easingFunction:d};if(b>this.lastTime)this.keyframes.push(e),this.lastTime=b;else if(!this.keyframes.length||b<this.keyframes[0].time)this.keyframes.unshift(e);else{var f=this._find(this.keyframes,b)+1;this.keyframes.splice(f,0,e)}return this},d.prototype.update=function(a){if(!this.enabled)return this.value;if(!this.keyframes.length)return this.value;var b,c;if(a<=this.keyframes[0].time)b=this.keyframes[0].value;else if(a>=this.keyframes[this.keyframes.length-1].time)b=this.keyframes[this.keyframes.length-1].value;else{c=this._find(this.keyframes,a);var d=this.keyframes[c],e=this.keyframes[c+1],g=(a-d.time)/(e.time-d.time),h=d.easingFunction(g);b=f.lerp(h,d.value,e.value)}return this.value=b,this.callbackUpdate(a,this.value,c),this},d.prototype.setTime=d.prototype.update,d.getSimpleTransformTweener=function(a,b,c,d){var e;return function(f,g){e||(e=d(c)),e&&(e.transformComponent.transform[a][b]=g,e.transformComponent.setUpdated())}},d.getRotationTweener=function(a,b,c,d){var e,g=function(d,h){if(e||(e=c(b)),e){var i=g.rotation;i[a]=h*f.DEG_TO_RAD,e.transformComponent.transform.rotation.fromAngles(i[0],i[1],i[2]),e.transformComponent.setUpdated()}};return g.rotation=d,g},a.exports=d},513:function(a,b,c){function d(){e.call(this,"TimelineSystem",["TimelineComponent"])}var e=c(42);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.process=function(a,b){for(var c=0;c<this._activeEntities.length;c++){var d=this._activeEntities[c];d.timelineComponent.update(b)}},d.prototype.play=function(){this.passive=!1;for(var a=this._activeEntities,b=0;b<a.length;b++){var c=a[b].timelineComponent;c.autoStart&&c.start()}},d.prototype.pause=function(){this.passive=!0;for(var a=this._activeEntities,b=0;b<a.length;b++){var c=a[b].timelineComponent;c.pause()}},d.prototype.resume=d.prototype.play,d.prototype.stop=function(){this.passive=!0;for(var a=this._activeEntities,b=0;b<a.length;b++){var c=a[b].timelineComponent;c.stop()}},a.exports=d}});